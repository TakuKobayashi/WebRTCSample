<!doctype html>
<html>
 <head>
  <title>Self Camera</title>
 </head>
 <body>
   <video id="myVideo" width="400" height="300" autoplay="1" ></video>
   <script type="text/javascript">
    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || window.navigator.mozGetUserMedia;
    /*
    var peer = new webkitPeerConnection({
      "iceServers": [{"url": "stun:stun.l.google.com:19302"}]
    });
*/
    var video = document.getElementById('myVideo');
    navigator.getUserMedia({ audio: false, video: true },
      function(stream) {
        console.log(stream);
        // video要素取得
        //var video = document.getElementById('video');

        // srcにBlob URLを指定するとカメラの画像がストリームで流れる
        video.src = window.URL.createObjectURL(stream);

        // 自分のpeerにカメラストリームを接続させる
        //peer.addStream(stream)
      },
      function(err) {
        console.log(err.name + ': ' + err.message);
      }
    );
   </script>
 </body>
</html>